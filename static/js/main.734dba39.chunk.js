(this["webpackJsonpreaktor-task"]=this["webpackJsonpreaktor-task"]||[]).push([[0],{32:function(t,e,n){},41:function(t,e,n){"use strict";n.r(e);var r=n(3),a=n(0),c=n.n(a),i=n(15),s=n.n(i),o=(n(32),n(9)),u=n.n(o),l=n(16),d=n(11),h=n(12),j=n(14),p=n(13),b=n(48),f=n(49),v=function(t){return Object(r.jsxs)(b.a,{fixed:"top",collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(r.jsx)(b.a.Brand,{children:"Navigation"}),Object(r.jsx)(b.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(r.jsx)(b.a.Collapse,{id:"responsive-navbar-nav",children:Object(r.jsxs)(f.a,{fill:"true",children:[Object(r.jsx)(f.a.Link,{onClick:function(){t.fetchProducts("jackets")},children:"Jackets"}),Object(r.jsx)(f.a.Link,{onClick:function(){t.fetchProducts("shirts")},children:"Shirts"}),Object(r.jsx)(f.a.Link,{onClick:function(){t.fetchProducts("accessories")},children:"Accessories"})]})})]})},x=(n(40),n(44)),O=n(45),k=n(46),m=n(43),y=n(50),g=function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={loading:!1,availability:"Check availability"},t.handleClick=function(){var e=Object(l.a)(u.a.mark((function e(n,r){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.checkAvailability,t.setState({loading:!0}),e.next=4,a(n,r);case 4:c=e.sent,t.setState({availability:c});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}return Object(h.a)(n,[{key:"render",value:function(){var t=this,e=this.state,n=e.availability,a=e.loading,c=this.props.data,i=c.name,s=c.id,o=c.color,u=c.manufacturer,l=c.price;return Object(r.jsx)(y.a,{style:{width:"18rem",margin:"auto",marginTop:"10px",marginBottom:"10px"},children:Object(r.jsxs)(y.a.Body,{children:[Object(r.jsx)(y.a.Title,{children:i}),Object(r.jsxs)(y.a.Text,{children:["Id : ",s]}),Object(r.jsxs)(y.a.Text,{children:["manufacturer : ",u]}),Object(r.jsxs)(y.a.Text,{children:["Color : ",o]}),Object(r.jsxs)(y.a.Text,{children:["price : ",l]}),Object(r.jsx)(m.a,{variant:"secondary",disabled:a,onClick:function(){t.handleClick(u,s)},children:n})]})})}}]),n}(a.Component),A=function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(t){var r;Object(d.a)(this,n),(r=e.call(this,t)).renderMoreProducts=function(){var t=r.props,e=t.products,n=t.amountToRender,a=r.state,c=a.rendered,i=a.amount;c=c.concat(e.slice(i,i+n)),i+=n,r.setState({rendered:c,amount:i})};var a=t.products,c=t.amountToRender;return r.state={amount:c,rendered:a.slice(0,c)},r}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.products,r=e.amountToRender;t.products!==this.props.products&&this.setState({rendered:n.slice(0,r)})}},{key:"render",value:function(){var t=this,e=this.state.rendered;return Object(r.jsxs)(x.a,{children:[Object(r.jsx)(O.a,{children:e.map((function(e){return Object(r.jsx)(k.a,{children:Object(r.jsx)(g,{checkAvailability:t.props.checkAvailability,data:e})},e.id)}))}),Object(r.jsx)(O.a,{children:Object(r.jsx)(m.a,{onClick:function(){t.renderMoreProducts()},variant:"secondary",size:"lg",block:!0,children:"Load more..."})})]})}}]),n}(a.Component),C=n(47),T=function(t){Object(j.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={message:"Pick something",availability:[],selected:null,products:[]},t.extractAvailability=function(t){return t.includes(">INSTOCK<")?"In stock":t.includes(">OUTOFSTOCK<")?"Out of stock":t.includes(">LESSTHAN10<")?"Less than 10":"NAN"},t.checkAvailability=function(){var e=Object(l.a)(u.a.mark((function e(n,r){var a,c,i,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==(a=t.state.availability).find((function(t){return t.manufacturer===n}))){e.next=11;break}return e.next=5,fetch("https://bad-api-assignment.reaktor.com/availability/".concat(n));case 5:return c=e.sent,e.next=8,c.json();case 8:i=e.sent,a.push({manufacturer:n,products:i.response}),t.setState({availability:a});case 11:return s=a.find((function(t){return t.manufacturer===n})),o=s.products.find((function(t){return t.id===r.toUpperCase()})),e.abrupt("return",t.extractAvailability(o.DATAPAYLOAD));case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return","Failed to fetch data");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),t.fetchProducts=function(){var e=Object(l.a)(u.a.mark((function e(n){var r,a,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.state,a=r.products,c=r.selected,void 0!==a.find((function(t){return t.category===n}))){e.next=10;break}return e.next=5,fetch("https://bad-api-assignment.reaktor.com/products/".concat(n));case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,a.push({category:n,items:s});case 10:c=a.findIndex((function(t){return t.category===n})),t.setState({products:a,selected:c}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),t.setState({message:"Could not Connect to API"});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),t}return Object(h.a)(n,[{key:"render",value:function(){var t=this.state,e=t.selected,n=t.products,a=t.message;return n.length<=0?Object(r.jsxs)("div",{children:[Object(r.jsx)(v,{fetchProducts:this.fetchProducts}),Object(r.jsx)(C.a,{fluid:!0,children:Object(r.jsx)("h1",{children:a})})]}):Object(r.jsxs)("div",{children:[Object(r.jsx)(v,{fetchProducts:this.fetchProducts}),Object(r.jsx)("div",{style:{marginBottom:"30px"}}),Object(r.jsx)(A,{checkAvailability:this.checkAvailability,products:n[e].items,amountToRender:10})]})}}]),n}(a.Component);s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(T,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.734dba39.chunk.js.map